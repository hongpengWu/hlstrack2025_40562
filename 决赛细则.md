# 嵌赛FPGA赛道-AMD 命题式基础赛道

## 命题式基础赛道决赛竞赛细则

**目标**：在 PYNQ-Z2 开发板上将Vitis Library 中的HLS 算子IP生成并设计并实现完整的 FPGA 加速系统。 该设计使用 Vitis，Vivado 工具 生成比特流烧写到板卡，并通过PYNQ Framework实现软硬件交互，使用Jupyter Notebook 或其他可视化设备进行现场演示。

**平台**：PYNQ-Z2

---

## 任务选择（三选一）

参赛队伍需在指定项目的基础上，完成以下设计任务之一：

### **选项一：信号处理任务**

设计一个信号处理系统，**必须包含 Vitis DSP Library 中的任一算子**

- 示例：音频处理、频谱分析仪、滤波器组、波束成形、回声消除等
- **加分项**：与神经网络加速器结合（如：音频分类、语音识别、信号智能分析等）

### **选项二：图像 ISP 任务**

设计一个图像信号处理系统，**必须包含 Vitis Vision Library 中的任一算子**

- 示例：图像增强、去噪、边缘检测、色彩校正、HDR 处理等
- **加分项**：与神经网络加速器结合（如：ISP + 目标检测、ISP + 图像分类等）

### **选项三：初赛算子应用扩展**

基于初赛三个算子（**LZ4 Compress、Cholesky、SHA256**）中的任意一个，设计加速系统

- **LZ4 Compress**：数据压缩应用（如：实时数据压缩传输、存储优化系统等）
- **Cholesky**：矩阵求解应用（如：最小二乘拟合、卡尔曼滤波、信号处理等）
- **SHA256**：加密安全应用（如：数据完整性验证、数字签名、区块链哈希等）

---

## 强制要求

### **1. Vitis Library HLS 算子使用** **必选项**

根据选择的任务，必须满足以下要求之一：

- **选项一（信号处理）**：必须使用 **Vitis DSP Library** 算子
- **选项二（图像 ISP）**：必须使用 **Vitis Vision Library** 算子
- **选项三（初赛扩展）**：必须使用初赛的 **LZ4 Compress / Cholesky / SHA256** 算子之一

### **2. 现场演示** ⚠️ **必选项**

- **平台**：PYNQ Framework 的 PS 端
- **接口**：Jupyter Notebook 进行现场演示
- **交互性**：实时可视化和结果展示
- **数据流**：PS (ARM) ↔ PL (FPGA 加速器)

### **3. 硬件设计**

- 必须包含使用 HLS 设计的自定义 IP 核
- 可以集成现有 IP 核（AXI 接口、DMA 等）
- 必须展示相比纯软件实现的明显性能提升

---

## 可选增强项（加分项）

✅ **跨领域结合**（重点加分项）：

- **选项一**：信号处理 + 神经网络加速器
- **选项二**：图像 ISP + 神经网络加速器
- **选项三**：初赛算子与实际应用场景深度结合

✅ **外部外设**：添加传感器、摄像头、显示屏、音频模块等
✅ **实时处理**：实时视频/音频流处理
✅ **用户界面**：Jupyter Notebook 中的交互式控制
✅ **多 IP 集成**：在流水线中组合多个加速器
✅ **功耗/资源优化**：高效使用 DSP、BRAM、LUT 资源

---

## 决赛评分标准（总分 100 分）

初赛和决赛成绩评分占比：初赛60%, 决赛40%

| 评分项                 | 分值 | 描述                                  |
| ---------------------- | ---- | ------------------------------------- |
| **功能性**       | 30   | 系统正确运行，满足设计规格            |
| **性能**         | 20   | 相对纯软件的加速比、吞吐量、延迟      |
| **算子集成质量** | 15   | DSP/Vision/初赛算子的有效使用         |
| **现场答辩质量** | 15   | Jupyter Notebook 展示、可视化、交互性 |
| **设计复杂度**   | 20   | 技术复杂度、多 IP 集成                |

---

## 准备内容

### **比赛当天**：

1. **现场演示**（7 分钟）：

   - 启动 PYNQ-Z2 开发板
   - 运行 Jupyter Notebook 演示
   - 讲解系统运行原理
   - 展示性能指标
2. **答辩环节**（3 分钟）：

   - 回答评委的技术问题
   - 解释设计选择

### **比赛后开源:**

1. **完整 FPGA 比特流**（.bit + .hwh 文件）
2. **Jupyter Notebook** 演示代码

---

## 技术支持资源

**Vitis Libraries GitHub**：https://github.com/Xilinx/Vitis_Libraries

**PYNQ 文档**：http://pynq.readthedocs.io

- PYNQ Overlays
- AXI 通信
- Jupyter Notebook 集成

**Vitis HLS Project-based Learning 学习案例 - FIR, Sobel，Convolution Filter**

**网址：** https://xilinx.github.io/xup_high_level_synthesis_design_flow/

---

## 时间安排

- 2025年11月29日

---

## 常见问题

**Q: 我可以使用预训练的神经网络模型吗？**
A: 可以

**Q: 决赛什么都不做，不答辩能有初赛的60分吗？**

A: 不能，答辩体现的选手本身从初赛到决赛的整体素质。

**Q: 我没有什么好的应用想法，怎么才能获得基础得分？**

A: 直接通过PYNQ Framework 展示所选择的Vitis Library算子的软硬件加速比。

**Q:我进了决赛但是没有可以使用的PYNQ-Z2板卡，可以借用吗？**

A: 可以，联系QQ：864371945, 决赛现场演示后归还。

**Q: 可以使用多个 Vitis Library 算子吗？**
A: 可以！在设计复杂度上会有加分。

**Q: 可以在 Jupyter Notebook 中使用 Python 库吗？**
A: 可以，用于 PS 端处理、可视化和用户界面。但核心算子加速必须在 PL 端实现。

**Q: 软硬件加速比如何计算？**
A: 对比 HLS 的硬件加速版本与 ARM 处理器上纯 Python/C++ 软件版本的性能。

**Q: 必须使用摄像头或其他外设吗？**
A: 不是必须，但使用外设可以增强演示效果并获得加分。

**Q: 选项一和选项二可以使用初赛算子吗？**
A: 可以，但必须同时包含对应的 DSP/Vision 算子作为核心功能。

**Q: 选项三必须使用哪个库的算子？**
A: 选项三必须使用初赛的 LZ4/Cholesky/SHA256 算子之一，可以结合其他 Vitis Library 算子增强功能。

**Q: 什么样的项目能获得"跨领域结合"加分？**
A:

- 选项一：DSP 信号处理与神经网络推理结合（如音频分类、语音识别）
- 选项二：Vision ISP 与神经网络推理结合（如图像增强+目标检测）
- 选项三：初赛算子与实际应用场景深度结合（如压缩传输系统、加密认证系统）

**Q: 初赛的代码可以直接复用吗？**
A: 可以，但需要在此基础上设计完整的应用系统，仅有算子本身不足以满足决赛要求。

---

## 技术建议

### **推荐开发流程**：

1. **需求分析**：明确应用场景和性能目标
2. **算法选择**：选择合适的 Vitis Library 算子
3. **HLS 设计**：开发自定义加速器 IP
4. **系统集成**：使用 Vivado 集成 IP 核
5. **PYNQ 开发**：编写 Jupyter Notebook 驱动程序
6. **性能优化**：迭代优化以达到最佳性能
7. **演示准备**：准备可视化和讲解材料

### **常用 Vitis Library 算子推荐**：

**DSP Library**：

- `fft_ifft_dit_1ch_str`: 流式单通道 FFT
- `fir_sr_sym`: 对称 FIR 滤波器
- `matrix_mult`: 矩阵乘法

**Vision Library**：

- `filter2D`: 2D 卷积滤波
- `resize`: 图像缩放
- `cvtColor`: 颜色空间转换
- `Canny`: 边缘检测

### **PYNQ 开发技巧**：

- 使用 `pynq.Overlay` 加载比特流
- 使用 `allocate` 分配共享内存
- 使用 `mmio` 进行寄存器访问
- 使用 `matplotlib` 或 `opencv` 进行可视化

---

**祝各位参赛选手决赛顺利！**
